<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
<title>ðŸ’Œ Catch My Letter Kane Bujju ðŸ’Œ</title>

<!-- Mobile-friendly font: Inter -->
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">

<style>
  :root{
    --bg1:#ffd6e0; --bg2:#ffb3c6; --bg3:#ff8fab;
    --accent:#ff4d6d;
    --popup-bg: #fff6f9;
    --popup-text: #3b0526; /* darker for readability */
    --muted: #6b3750;
  }

  /* base */
  html,body{
    height:100%;
    margin:0;
    font-family:"Inter",system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial;
    -webkit-font-smoothing:antialiased;
    -moz-osx-font-smoothing:grayscale;
    color:var(--popup-text);
    -webkit-text-size-adjust:100%;
    background: linear-gradient(180deg,var(--bg1),var(--bg2),var(--bg3));
    overflow:hidden;
    touch-action:none;
  }

  /* header & progress */
  h1{
    color:#1b0520; /* darker header for contrast */
    margin:12px 0 6px;
    text-align:center;
    font-size:clamp(20px,6.5vw,40px);
    font-weight:700;
    letter-spacing:0.6px;
    z-index:5;
  }
  #progress{
    color:var(--muted);
    text-align:center;
    margin:0 0 8px;
    font-size:clamp(14px,4.2vw,22px);
    font-weight:600;
  }

  /* canvas fills screen */
  canvas{ position:fixed; inset:0; width:100vw; height:100vh; display:block; z-index:1; }

  /* popups */
  .popup{
    z-index:60;
    position:fixed;
    left:50%;
    top:50%;
    transform:translate(-50%,-50%);
    background:var(--popup-bg);
    border:2px solid rgba(255,77,109,0.18);
    border-radius:14px;
    padding:18px 18px;
    color:var(--popup-text);
    box-shadow: 0 10px 40px rgba(11,6,12,0.12);
    max-width:92vw;
    text-align:center;
  }
  .popup.hidden{ display:none; }
  .popup .big{ font-size:clamp(16px,4.2vw,20px); line-height:1.4; color:var(--popup-text); }
  .popup .huge{ font-size:clamp(18px,4.8vw,28px); line-height:1.35; color:var(--popup-text); }

  .popup button{
    margin-top:14px;
    padding:12px 20px;
    border-radius:10px;
    border:0;
    background:var(--accent);
    color:#fff;
    font-size:clamp(14px,4vw,18px);
    cursor:pointer;
    font-weight:700;
    box-shadow: 0 6px 18px rgba(255,77,109,0.18);
  }

  .celebration{ animation:glow 1s infinite alternate; }
  @keyframes glow{ from{ box-shadow:0 0 18px rgba(255,77,109,0.22);} to{ box-shadow:0 0 36px rgba(255,51,133,0.28);} }

  /* final full-screen */
  #finalScreen{
    display:none;
    position:fixed;
    inset:0;
    z-index:200;
    background: linear-gradient(180deg, rgba(0,0,0,0.72), rgba(4,2,6,0.85));
    justify-content:center;
    align-items:center;
    color:#fff;
    text-align:center;
    font-weight:800;
    flex-direction:column;
  }
  #finalText{
    font-size:clamp(30px,12vw,84px);
    animation:heartbeat 1.4s infinite;
    text-shadow:0 8px 40px rgba(255,77,109,0.28), 0 0 16px rgba(255,153,179,0.08);
    margin:0 12px;
  }
  #finalSub{ font-size:clamp(14px,3.8vw,22px); margin-top:10px; opacity:0.95; font-weight:600; color:#ffd7e6; }
  @keyframes heartbeat{ 0%,100%{ transform:scale(1);} 50%{ transform:scale(1.12);} }

  /* confetti (DOM fallback) */
  .confetti{ position:fixed; width:10px; height:10px; top:-10px; animation:fall linear forwards; z-index:150; border-radius:2px; }
  @keyframes fall{ to { transform:translateY(100vh) rotate(720deg); opacity:0; } }

  /* center rotating text */
  #centerText{
    position:fixed;
    left:50%;
    top:50%;
    transform:translate(-50%,-50%);
    z-index:6;
    color:#3b0526;
    font-weight:600;
    font-size:clamp(16px,4.8vw,28px);
    opacity:0;
    transition:opacity .9s, transform .9s;
    pointer-events:none;
    text-align:center;
    padding:4px 12px;
    background: rgba(255,255,255,0.65);
    border-radius:999px;
    box-shadow: 0 6px 18px rgba(11,6,12,0.06);
  }

  /* mobile adjustments */
  @media (max-width:600px){
    body { background: linear-gradient(180deg,#ffeaf0,#ffd3e2,#ffc6dc); }
    h1 { font-size: clamp(20px,9vw,34px); text-shadow:none; color:#2b0520; }
    #centerText { font-size:clamp(15px,5.5vw,22px); padding:8px 14px; }
    .popup { padding:18px 16px; border-radius:14px; }
    .popup .huge { font-size:clamp(18px,5.5vw,26px); }
  }
</style>
</head>
<body>
  <h1>ðŸ’Œ Floating Love Letters ðŸ’Œ</h1>
  <div id="progress">0 / 30</div>

  <canvas id="gameCanvas" aria-label="Floating letters area"></canvas>

  <!-- Note popup -->
  <div id="notePopup" class="popup hidden" role="dialog" aria-modal="true">
    <div id="noteText" class="big"></div>
    <button id="noteClose">Close</button>
  </div>

  <!-- Final (30th) popup â€” appears after 29 reads -->
  <div id="finalPopup" class="popup hidden" role="dialog" aria-modal="true">
    <div id="finalBigText" class="huge"></div>
    <button id="finalButton">Bujju â€” Yatish wants to say something to you</button>
  </div>

  <div id="centerText"></div>

  <!-- Fullscreen final screen (hidden by default) -->
  <div id="finalScreen" aria-hidden="true">
    <div id="finalText">ðŸ’– Yatish Loves You ðŸ’–</div>
    <div id="finalSub">Forever &amp; always</div>
    <button id="replayBtn" style="margin-top:22px;padding:12px 20px;border-radius:10px;border:0;background:#ff4d6d;color:#fff;font-size:18px;cursor:pointer;display:none;">Replay</button>
  </div>

  <!-- optional background music -->
  <audio id="bgMusic" src="song.mp3" loop></audio>

<script>
/* ================= Messages (unchanged) ================= */
const messages = [
"ðŸ’– Bujju kanna, no fight can reduce my love.",
"ðŸŒ¸ Kullama you are my safe place and happiness.",
"ðŸŒˆ Putti Iâ€™ll always stand by you no matter what.",
"ðŸ«‚ Kulli I want to hug you tight and reassure u.",
"â¤ï¸ Katthe You mean more than words for me.",
"ðŸŒ¹ Nan Rani nange nen mel preethi antu kame agalla.",
"ðŸ’« Nan menake you are the best part of my day.",
"ðŸ•Šï¸ Cutie your soo very loved by all of us kane I am always here fr u.",
"âœ¨ Sweetie Your smile is my Happiness yeli ond kita nagu nodona kane.",
"ðŸŒ» Nan sundri Yena jagala aadedaruu nenn nanng lakshmi ne.",
"ðŸ’Œ Nan chuttamale life with u is my dream come true.",
"ðŸ’­ Kulls your always my top priority forever kane, spelling wrong edra adjust madko hehehe.",
"ðŸ«¶ Putti I cherish every moment with you kane nang nen thumba esta.",
"ðŸ¥° Thiklu Youâ€™re my favorite hello and my hardest goodbye.",
"ðŸ” Mentlu your our happines kane for me ,uncle mathe Amma.",
"ðŸŒ· Yemme Youâ€™re my safe place kane .",
"ðŸ’ž Nang antu nen mela Love sakath jaasthe agtedha.",
"ðŸŒŸ Nan Thanu is stronger than anyone think.",
"ðŸ’ Darlinguu Even in silence, I feel you with me.",
"ðŸŒ¼ Nan Psycho You deserve every happiness.",
"ðŸ•Šï¸ For Your Putts, even bad days are bright wid u.",
"ðŸ’Œ I love holding your hand and forever will kane.",
"â¤ï¸ Bujju ond kita nagoo please.",
"ðŸŒ¹ Mudu bujjuuu nann favourite flower nenu bare nang alla uncle mathe amm gu kuda.",
"âœ¨ Leyyyyyy You complete my world looosu.",
"ðŸ’– Looooooooju be Forever mine, and ill forever yours.",
"ðŸŒˆ Nan mohini You light up my life.",
"ðŸ«‚ Pretty lil baby Hugging you always heals me.",
"ðŸ’Œ Bujjju never ever think of going away from me kaal murethene katthe."
];
const finalMessage = "ðŸ’ž No matter what,we alll will love you endlessly, ur not just a another women for us your adrusta lakshmi for me, mane ya mudu maglu for amma and yen kasta bandru shakti aage nentkolo strong girl for uncle. We all love u kane";
const milestones = {
 5: "Awww cutie, youâ€™ve caught 5 love notes already ðŸ’• Each one is a piece of my heartfelt words which I always wanted to say for you Kane ðŸ’•",
10: "10 letters read! ðŸ˜ Every message is me whispering how much I adore you. You make my world brighter ðŸ’–",
20: "Wow, 20 love notes! ðŸ¥° Youâ€™re my everything, and catching these reminds me how lucky I am to have you in my life ðŸ’ž"
};

/* ================= Canvas setup (DPR aware) ================= */
const canvas = document.getElementById('gameCanvas');
const ctx = canvas.getContext('2d');
function resize() {
  const dpr = Math.max(window.devicePixelRatio || 1, 1);
  canvas.style.width = window.innerWidth + 'px';
  canvas.style.height = window.innerHeight + 'px';
  canvas.width = Math.round(window.innerWidth * dpr);
  canvas.height = Math.round(window.innerHeight * dpr);
  ctx.setTransform(dpr, 0, 0, dpr, 0, 0);
}
resize(); window.addEventListener('resize', resize);

/* ================= State ================= */
let unread = [...messages];
let envelopes = [];
let readCount = 0;
const progressEl = document.getElementById('progress');
const SPAWN_MS = 650;
const MAX_ON_SCREEN = 60;

function hitHalf(size){ return Math.max(size * 0.6, 32); }

function spawnEnvelope(){
  if(unread.length === 0) return;
  if(envelopes.length >= MAX_ON_SCREEN) return;
  const msg = unread[Math.floor(Math.random()*unread.length)];
  const marginX = 0.06 * window.innerWidth;
  const x = marginX + Math.random() * (window.innerWidth - marginX*2);
  const y = window.innerHeight + 40 + Math.random()*40;
  const base = Math.min(window.innerWidth, window.innerHeight);
  const size = Math.min(Math.max(Math.floor(base / (base < 500 ? 10 : 12)), 48), 90);
  const speed = 1 + Math.random()*1.6;
  envelopes.push({ x, y, size, speed, msg, id: Math.random().toString(36).slice(2,9) });
}

/* spawn until 29 reads */
const spawner = setInterval(()=>{ if(readCount < 29) spawnEnvelope(); }, SPAWN_MS);

/* draw */
function draw(){
  ctx.clearRect(0,0,canvas.width,canvas.height);
  ctx.fillStyle = 'rgba(255,255,255,0.02)';
  ctx.fillRect(0,0,window.innerWidth,window.innerHeight);

  for(let i=0;i<envelopes.length;i++){
    const e = envelopes[i];
    e.y -= e.speed;
    e.x += Math.sin((Date.now()/800)+i) * (e.size * 0.0008);
    ctx.save();
    ctx.translate(e.x,e.y);
    ctx.font = `${e.size}px Inter, Arial`;
    ctx.textAlign = 'center';
    ctx.fillStyle = 'rgba(0,0,0,0.12)';
    ctx.fillText('ðŸ’Œ', 3, 6);
    ctx.fillStyle = '#b40046';
    ctx.fillText('ðŸ’Œ', 0, 0);
    ctx.restore();
  }

  envelopes = envelopes.filter(e => e.y > -140);
  requestAnimationFrame(draw);
}
requestAnimationFrame(draw);

/* input */
function tryCatchAt(clientX, clientY){
  for(let i=envelopes.length-1;i>=0;i--){
    const e = envelopes[i];
    const half = hitHalf(e.size);
    if(clientX >= e.x-half && clientX <= e.x+half && clientY >= e.y-half && clientY <= e.y+half){
      if(unread.indexOf(e.msg) === -1){
        envelopes.splice(i,1);
        return true;
      }
      envelopes = envelopes.filter(env => env.msg !== e.msg);
      const idx = unread.indexOf(e.msg);
      if(idx !== -1) unread.splice(idx,1);
      readCount++;
      progressEl.innerText = `${readCount} / 30`;
      showNote(e.msg);
      return true;
    }
  }
  return false;
}
canvas.addEventListener('click', (ev)=> tryCatchAt(ev.clientX, ev.clientY));
canvas.addEventListener('touchstart', (ev)=>{ if(ev.touches && ev.touches[0]) tryCatchAt(ev.touches[0].clientX, ev.touches[0].clientY); }, {passive:true});

/* popups */
const notePopup = document.getElementById('notePopup');
const noteText = document.getElementById('noteText');
const noteClose = document.getElementById('noteClose');
const finalPopup = document.getElementById('finalPopup');
const finalBigText = document.getElementById('finalBigText');
const finalButton = document.getElementById('finalButton');
const finalScreen = document.getElementById('finalScreen');
const replayBtn = document.getElementById('replayBtn');

noteClose.addEventListener('click', ()=> {
  notePopup.classList.add('hidden');
  if(milestones[readCount]) showMilestone(milestones[readCount]);
  if(readCount === 29){
    finalBigText.innerText = finalMessage;
    finalPopup.classList.remove('hidden');
    finalPopup.classList.add('celebration');
    launchConfetti();
  }
});
function showNote(txt){
  noteText.innerText = txt;
  notePopup.classList.remove('hidden');
}
function showMilestone(txt){
  const mp = document.getElementById('milestonePopup') || createMilestonePopup();
  const mt = document.getElementById('milestoneText');
  const mc = document.getElementById('milestoneClose');
  mt.innerText = txt;
  mp.classList.remove('hidden');
  mc.onclick = ()=> mp.classList.add('hidden');
}
function createMilestonePopup(){
  const div = document.createElement('div');
  div.id = 'milestonePopup';
  div.className = 'popup';
  div.innerHTML = `<div id="milestoneText" class="huge"></div><button id="milestoneClose">Okay</button>`;
  document.body.appendChild(div);
  return div;
}

/* final button */
finalButton.addEventListener('click', ()=> {
  finalPopup.classList.add('hidden');
  clearInterval(spawner);
  setTimeout(()=>{
    launchConfetti();
    finalScreen.style.display = 'flex';
    replayBtn.style.display = 'inline-block';
  }, 400);
});
replayBtn.addEventListener('click', ()=> location.reload());

/* confetti */
function launchConfetti(){
  for(let i=0;i<120;i++){
    const c = document.createElement('div');
    c.className = 'confetti';
    c.style.left = Math.random()*100 + 'vw';
    c.style.background = ['#ff4d6d','#ff79a8','#ffc0cb','#ffd6e0'][Math.floor(Math.random()*4)];
    c.style.animationDuration = (2 + Math.random()*3) + 's';
    document.body.appendChild(c);
    setTimeout(()=> c.remove(), 5200);
  }
}

/* center rotating text */
const centerText = document.getElementById('centerText');
const centerMessages = [
  "Tap the letters ðŸ’Œ",
  "NAN MUDU BUJJU â¤ï¸",
  "With Thumba Loveâ€¦ ðŸ’•",
  "MISSING U KANE ðŸ’–",
  "Endless Love ðŸ’ž"
];
let ci = 0;
function cycleCenter(){ centerText.style.opacity = 0; setTimeout(()=>{ centerText.innerText = centerMessages[ci]; centerText.style.opacity = 1; ci = (ci+1) % centerMessages.length; }, 700); }
setInterval(cycleCenter, 3800); cycleCenter();

/* audio fix */
const bg = document.getElementById('bgMusic');
document.body.addEventListener('click', ()=>{ if(bg.paused) bg.play(); }, {once:true});

/* prevent selection */
document.addEventListener('selectstart', e => e.preventDefault());
</script>
</body>
</html>
